<div class="flex justify-center items-start pt-10 min-h-full px-4">
    <div class="bg-white/90 backdrop-blur-lg rounded-2xl p-8 w-full max-w-2xl shadow-2xl border border-white/20">
        <!-- Header -->
        <div class="mb-8">
            <div class="flex items-center justify-between mb-4">
                <div>
                    <h2 class="text-3xl font-bold text-gray-800 mb-2">Novo Cadastro</h2>
                    <p class="text-gray-600">Cadastre um novo participante e emita um ingresso.</p>
                </div>
                
                <!-- Botão Sincronizar -->
                <button 
                    (click)="syncNow()"
                    [disabled]="syncService.syncing$ | async"
                    class="flex items-center bg-blue-600 hover:bg-blue-700 disabled:bg-gray-400 disabled:cursor-not-allowed text-white font-semibold py-2 px-4 rounded-lg transition-colors duration-200">
                    <svg *ngIf="!(syncService.syncing$ | async)" class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></path>
                    </svg>
                    <div *ngIf="syncService.syncing$ | async" class="animate-spin rounded-full h-5 w-5 border-b-2 border-white mr-2"></div>
                    {{ (syncService.syncing$ | async) ? 'Sincronizando...' : 'Sincronizar' }}
                </button>
            </div>
        </div>

        <!-- Form -->
        <div class="space-y-5">
            <!-- Nome -->
            <div>
                <label class="block mb-2 font-semibold text-gray-700 text-sm">Nome Completo</label>
                <input 
                    type="text" 
                    [(ngModel)]="name" 
                    placeholder="John Doe"
                    class="w-full px-4 py-3 border-2 border-gray-200 rounded-lg text-base transition-colors outline-none focus:border-green-500"
                >
            </div>

            <!-- Email -->
            <div>
                <label class="block mb-2 font-semibold text-gray-700 text-sm">Email</label>
                <input 
                    type="email" 
                    [(ngModel)]="email" 
                    placeholder="john@example.com"
                    class="w-full px-4 py-3 border-2 border-gray-200 rounded-lg text-base transition-colors outline-none focus:border-green-500"
                >
            </div>

            <!-- Seleção de Evento -->
            <div>
                <label class="block mb-2 font-semibold text-gray-700 text-sm">Evento</label>
                <select 
                    [(ngModel)]="selectedEventId" 
                    class="w-full px-4 py-3 border-2 border-gray-200 rounded-lg text-base transition-colors outline-none focus:border-green-500 bg-white"
                >
                    <option value="">Selecione um evento</option>
                    <option *ngFor="let event of availableEvents" [value]="event.id">
                        {{ event.title }} - {{ formatEventTime(event.starts_at) }}
                    </option>
                </select>
                
                <p *ngIf="availableEvents.length === 0" class="mt-2 text-sm text-gray-500">
                    Nenhum evento disponível no momento
                </p>
            </div>

            <!-- Botão de Submissão -->
            <button 
                (click)="register()" 
                [disabled]="!name || !email || !selectedEventId"
                class="w-full py-3.5 bg-green-500 text-white font-semibold text-base rounded-lg transition-colors mt-4 disabled:bg-green-200 disabled:cursor-not-allowed hover:bg-green-600"
            >
                Registrar & Check-in
            </button>

            <!-- Resultado -->
            <div 
                *ngIf="status !== 'idle'" 
                class="mt-5 p-5 rounded-xl text-center flex flex-col items-center animate-slideDown"
                [ngClass]="{
                    'bg-green-50 text-green-800 border border-green-200': status === 'success',
                    'bg-red-50 text-red-800 border border-red-200': status === 'error'
                }"
            >
                <div class="text-3xl mb-2">
                    {{ status === 'success' ? '✅' : '⚠️' }}
                </div>
                <p>{{ message }}</p>
            </div>
        </div>
    </div>
</div>